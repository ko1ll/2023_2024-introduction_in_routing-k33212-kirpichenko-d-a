University: [ITMO University](https://itmo.ru/ru/)  
Faculty: [FICT](https://fict.itmo.ru)  
Course: [Introduction in routing](https://github.com/itmo-ict-faculty/introduction-in-routing)  
Year: 2023/2024  
Group: K33212  
Author: Kirpichenko Daniil Aleksandrovich
Lab: Lab3  
Date of create: 26.11.2023  
Date of finished: 27.11.2023  


# Лабораторная работ №3 "Эмуляция распределенной корпоративной сети связи, настройка OSPF и MPLS, организация первого EoMPLS"

### Цель работы
Изучить протоколы OSPF и MPLS, механизмы организации EoMPLS.

### Ход работы
- Настроить IP адреса на интерфейсах.
- Настроить OSPF и MPLS.
- Настроить EoMPLS.
- Назначить адресацию на контейнеры, связанные между собой EoMPLS.
- Настроить имена устройств, сменить логины и пароли.

## Yaml файл с настройкой сети

![](https://github.com/ko1ll/2023_2024-introduction_in_routing-k33212-kirpichenko-d-a/blob/main/photos/22.jpg)

![](https://github.com/ko1ll/2023_2024-introduction_in_routing-k33212-kirpichenko-d-a/blob/main/photos/23.jpg)

## Схема сети

![](https://github.com/ko1ll/2023_2024-introduction_in_routing-k33212-kirpichenko-d-a/blob/main/photos/21.jpg)

## Настройка NY

![](https://github.com/ko1ll/2023_2024-introduction_in_routing-k33212-kirpichenko-d-a/blob/main/photos/24.jpg)

### interface bridge
Создаем мост, которые в последствии будем использовать для связи с SPB. Хосты могут быть соединены вместе с помощью мостов MAC. 
Функция моста позволяет соединять хосты, будто бы они подключены к одной локальной сети. 

### interface vpls
Настриваем VPLS, который является виртуальным туннельным интерфейсом.
- Устанавливем один id, так как каналы в одном домене должны иметь одинаковый айдишник;
- Размер пакета, равный 1500;
- Мак адресс;
- Название сети;
- Айпи адресс удаленного узла.

### routing ospf instance
Настриваем протокол состояния соединения OSPF, который строит маршруты в динамической сетевой структуре, которая может использовать различные пути к своим подсетям. Он старается выбирать кратчайший путь к подсети.
- Выставляем идентификатор маршрутизатора OSPF.

### interface port
Добавляем наш созданный мост в подключенные порты.

### ip adress
Настраиваем айпишники на наши интерфейсах для соседних компьютеров.

### dhcp-client
Создаем dhcp килент на главном интерфейсе.

### mpls ldp 
Добавляем наши интерфейсы в протокол распределения меток.
- Включаем его;
- Указываем адрес подключенийи и объяваляем его в качестве транспортного адреса для соседей.

### mpls ldp interface
Добавляем наши интерфейсы.

### routing ospf network
Создаем зону для наших роутеров, чтобы была возможность строить дерево кратчайших путей.

### system identity
Меняем имя нашего роутера.

## Настройка LND

![](https://github.com/ko1ll/2023_2024-introduction_in_routing-k33212-kirpichenko-d-a/blob/main/photos/25.jpg)

### interface bridge
Добавляем уже существующий мост. Хосты могут быть соединены вместе с помощью мостов MAC. 
Функция моста позволяет соединять хосты, будто бы они подключены к одной локальной сети. 

### routing ospf instance
Настриваем протокол состояния соединения OSPF, который строит маршруты в динамической сетевой структуре, которая может использовать различные пути к своим подсетям. Он старается выбирать кратчайший путь к подсети.
- Выставляем идентификатор маршрутизатора OSPF.

### ip adress
Настраиваем айпишники на наши интерфейсах для соседних компьютеров.

### dhcp-client
Создаем dhcp килент на главном интерфейсе.

### mpls ldp 
Добавляем наши интерфейсы в протокол распределения меток.
- Включаем его;
- Указываем адрес подключенийи и объяваляем его в качестве транспортного адреса для соседей.

### mpls ldp interface
Добавляем наши интерфейсы.

### routing ospf network
Создаем зону для наших роутеров, чтобы была возможность строить дерево кратчайших путей.

### system identity
Меняем имя нашего роутера.


## Настройка HKI

![](https://github.com/ko1ll/2023_2024-introduction_in_routing-k33212-kirpichenko-d-a/blob/main/photos/26.jpg)

### interface bridge
Добавляем уже существующий мост. Хосты могут быть соединены вместе с помощью мостов MAC. 
Функция моста позволяет соединять хосты, будто бы они подключены к одной локальной сети. 

### routing ospf instance
Настриваем протокол состояния соединения OSPF, который строит маршруты в динамической сетевой структуре, которая может использовать различные пути к своим подсетям. Он старается выбирать кратчайший путь к подсети.
- Выставляем идентификатор маршрутизатора OSPF.

### ip adress
Настраиваем айпишники на наши интерфейсах для соседних компьютеров.

### dhcp-client
Создаем dhcp килент на главном интерфейсе.

### mpls ldp 
Добавляем наши интерфейсы в протокол распределения меток.
- Включаем его;
- Указываем адрес подключенийи и объяваляем его в качестве транспортного адреса для соседей.

### mpls ldp interface
Добавляем наши интерфейсы.

### routing ospf network
Создаем зону для наших роутеров, чтобы была возможность строить дерево кратчайших путей.

### system identity
Меняем имя нашего роутера.


## Настройка SPB

![](https://github.com/ko1ll/2023_2024-introduction_in_routing-k33212-kirpichenko-d-a/blob/main/photos/27.jpg)

### interface bridge
Добавляем уже существующий мост, которые будет использован для связи с NY. Хосты могут быть соединены вместе с помощью мостов MAC. 
Функция моста позволяет соединять хосты, будто бы они подключены к одной локальной сети. 

### interface vpls
Настриваем VPLS, который является виртуальным туннельным интерфейсом.
- Устанавливем один id, так как каналы в одном домене должны иметь одинаковый айдишник;
- Размер пакета, равный 1500;
- Мак адресс;
- Название сети;
- Айпи адресс удаленного узла.

### routing ospf instance
Настриваем протокол состояния соединения OSPF, который строит маршруты в динамической сетевой структуре, которая может использовать различные пути к своим подсетям. Он старается выбирать кратчайший путь к подсети.
- Выставляем идентификатор маршрутизатора OSPF.

### ip adress
Настраиваем айпишники на наши интерфейсах для соседних компьютеров.

### dhcp-client
Создаем dhcp килент на главном интерфейсе.

### mpls ldp 
Добавляем наши интерфейсы в протокол распределения меток.
- Включаем его;
- Указываем адрес подключенийи и объяваляем его в качестве транспортного адреса для соседей.

### mpls ldp interface
Добавляем наши интерфейсы.

### routing ospf network
Создаем зону для наших роутеров, чтобы была возможность строить дерево кратчайших путей.

### system identity
Меняем имя нашего роутера.


## Настройка MSK

![](https://github.com/ko1ll/2023_2024-introduction_in_routing-k33212-kirpichenko-d-a/blob/main/photos/28.jpg)

### interface bridge
Добавляем уже существующий мост. Хосты могут быть соединены вместе с помощью мостов MAC. 
Функция моста позволяет соединять хосты, будто бы они подключены к одной локальной сети. 

### routing ospf instance
Настриваем протокол состояния соединения OSPF, который строит маршруты в динамической сетевой структуре, которая может использовать различные пути к своим подсетям. Он старается выбирать кратчайший путь к подсети.
- Выставляем идентификатор маршрутизатора OSPF.

### ip adress
Настраиваем айпишники на наши интерфейсах для соседних компьютеров.

### dhcp-client
Создаем dhcp килент на главном интерфейсе.

### mpls ldp 
Добавляем наши интерфейсы в протокол распределения меток.
- Включаем его;
- Указываем адрес подключенийи и объяваляем его в качестве транспортного адреса для соседей.

### mpls ldp interface
Добавляем наши интерфейсы.

### routing ospf network
Создаем зону для наших роутеров, чтобы была возможность строить дерево кратчайших путей.

### system identity
Меняем имя нашего роутера.


## Настройка LBN

![](https://github.com/ko1ll/2023_2024-introduction_in_routing-k33212-kirpichenko-d-a/blob/main/photos/29.jpg)

### interface bridge
Добавляем уже существующий мост. Хосты могут быть соединены вместе с помощью мостов MAC. 
Функция моста позволяет соединять хосты, будто бы они подключены к одной локальной сети. 

### routing ospf instance
Настриваем протокол состояния соединения OSPF, который строит маршруты в динамической сетевой структуре, которая может использовать различные пути к своим подсетям. Он старается выбирать кратчайший путь к подсети.
- Выставляем идентификатор маршрутизатора OSPF.

### ip adress
Настраиваем айпишники на наши интерфейсах для соседних компьютеров.

### dhcp-client
Создаем dhcp килент на главном интерфейсе.

### mpls ldp 
Добавляем наши интерфейсы в протокол распределения меток.
- Включаем его;
- Указываем адрес подключенийи и объяваляем его в качестве транспортного адреса для соседей.

### mpls ldp interface
Добавляем наши интерфейсы.

### routing ospf network
Создаем зону для наших роутеров, чтобы была возможность строить дерево кратчайших путей.

### system identity
Меняем имя нашего роутера.


## Настройка PC1

![](https://github.com/ko1ll/2023_2024-introduction_in_routing-k33212-kirpichenko-d-a/blob/main/photos/30.jpg)

Меняем имя роутера, ставим айпишник для интерфейса и включаем dhcp.

## Настройка SGI.Prism

![](https://github.com/ko1ll/2023_2024-introduction_in_routing-k33212-kirpichenko-d-a/blob/main/photos/31.jpg)

Меняем имя роутера, ставим айпишник для интерфейса и включаем dhcp.


## Таблица форвардов

![](https://github.com/ko1ll/2023_2024-introduction_in_routing-k33212-kirpichenko-d-a/blob/main/photos/32.jpg)

