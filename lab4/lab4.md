University: [ITMO University](https://itmo.ru/ru/)  
Faculty: [FICT](https://fict.itmo.ru)  
Course: [Introduction in routing](https://github.com/itmo-ict-faculty/introduction-in-routing)  
Year: 2023/2024  
Group: K33212  
Author: Kirpichenko Daniil Aleksandrovich

Lab: Lab4
Date of create: 10.12.2023  
Date of finished: 11.12.2023  


# Лабораторная работ №4 "Эмуляция распределенной корпоративной сети связи, настройка iBGP, организация L3VPN, VPLS"

### Цель работы
Изучить протоколы BGP, MPLS и правила организации L3VPN и VPLS.

### Ход работы
- Вам необходимо сделать IP/MPLS сеть связи для "RogaIKopita Games" изображенную на рисунке 1 в ContainerLab. Необходимо создать все устройства указанные на схеме и соединения между ними.- Настроить OSPF и MPLS.
- Помимо этого вам необходимо настроить IP адреса на интерфейсах.
- Настроить OSPF и MPLS.
- Настроить iBGP с route reflector кластером

#### Первая часть:

- Настроить iBGP RR Cluster.
- Настроить VRF на 3 роутерах.
- Настроить RD и RT на 3 роутерах.
- Настроить IP адреса в VRF.
- Проверить связность между VRF
- Настроить имена устройств, сменить логины и пароли.

#### Вторая часть:

- Разобрать VRF на 3 роутерах (или отвязать их от интерфейсов).
- Настроить VPLS на 3 роутерах.
- Настроить IP адресацию на PC1,2,3 в одной сети.
- Проверить связность.


## Yaml файл с настройкой сети

![](https://github.com/ko1ll/2023_2024-introduction_in_routing-k33212-kirpichenko-d-a/blob/main/photos/52.jpg)

## Схема сети

![](https://github.com/ko1ll/2023_2024-introduction_in_routing-k33212-kirpichenko-d-a/blob/main/photos/51.jpg)

## Настройка NY

![](https://github.com/ko1ll/2023_2024-introduction_in_routing-k33212-kirpichenko-d-a/blob/main/photos/42.jpg)

### interface bridge
Создаем мост, которые в последствии будем использовать для связи. Хосты могут быть соединены вместе с помощью мостов MAC. 
Функция моста позволяет соединять хосты, будто бы они подключены к одной локальной сети. 
### routing bgp instance
настраиваем протокол BGP, позволяет настроить систему динамической маршрутизации. Система автоматически обновляет таблицы маршрутизации устройств, использующих BGP, в случае изменения топологии сети.
### routing ospf instance
Настриваем протокол состояния соединения OSPF, который строит маршруты в динамической сетевой структуре, которая может использовать различные пути к своим подсетям. Он старается выбирать кратчайший путь к подсети.
- Выставляем идентификатор маршрутизатора OSPF.
### ip adress
Настраиваем айпишники на наши интерфейсах для соседних компьютеров.
### dhcp-client
Создаем dhcp килент на главном интерфейсе.
### route vrf
Настраиваем VRF, который позволяет создавать несколько экземпляров виртуальной маршрутизации, обмениваясь IP-префиксами между маршрутизаторами. VRF решают проблему перекрытия префиксов IP и обеспечивают необходимую конфиденциальность.
### mpls ldp 
Добавляем наши интерфейсы в протокол распределения меток.
- Включаем его;
- Указываем адрес подключенийи и объяваляем его в качестве транспортного адреса для соседей.
### mpls ldp interface
Добавляем наши интерфейсы.
### routing bgp peer
Подключаем пир для возможности взаимодействия с ним.
### routing ospf network
Создаем зону для наших роутеров, чтобы была возможность строить дерево кратчайших путей.
### system identity
Меняем имя нашего роутера.

## Настройка SPB

![](https://github.com/ko1ll/2023_2024-introduction_in_routing-k33212-kirpichenko-d-a/blob/main/photos/43.jpg)

### interface bridge
Создаем мост, которые в последствии будем использовать для связи. Хосты могут быть соединены вместе с помощью мостов MAC. 
Функция моста позволяет соединять хосты, будто бы они подключены к одной локальной сети. 
### routing bgp instance
настраиваем протокол BGP, позволяет настроить систему динамической маршрутизации. Система автоматически обновляет таблицы маршрутизации устройств, использующих BGP, в случае изменения топологии сети.
### routing ospf instance
Настриваем протокол состояния соединения OSPF, который строит маршруты в динамической сетевой структуре, которая может использовать различные пути к своим подсетям. Он старается выбирать кратчайший путь к подсети.
- Выставляем идентификатор маршрутизатора OSPF.
### ip adress
Настраиваем айпишники на наши интерфейсах для соседних компьютеров.
### dhcp-client
Создаем dhcp килент на главном интерфейсе.
### route vrf
Настраиваем VRF, который позволяет создавать несколько экземпляров виртуальной маршрутизации, обмениваясь IP-префиксами между маршрутизаторами. VRF решают проблему перекрытия префиксов IP и обеспечивают необходимую конфиденциальность.
### mpls ldp 
Добавляем наши интерфейсы в протокол распределения меток.
- Включаем его;
- Указываем адрес подключенийи и объяваляем его в качестве транспортного адреса для соседей.
### mpls ldp interface
Добавляем наши интерфейсы.
### routing bgp peer
Подключаем пир для возможности взаимодействия с ним.
### routing ospf network
Создаем зону для наших роутеров, чтобы была возможность строить дерево кратчайших путей.
### system identity
Меняем имя нашего роутера.


## Настройка SVL

![](https://github.com/ko1ll/2023_2024-introduction_in_routing-k33212-kirpichenko-d-a/blob/main/photos/44.jpg)

### interface bridge
Создаем мост, которые в последствии будем использовать для связи. Хосты могут быть соединены вместе с помощью мостов MAC. 
Функция моста позволяет соединять хосты, будто бы они подключены к одной локальной сети. 
### routing bgp instance
настраиваем протокол BGP, позволяет настроить систему динамической маршрутизации. Система автоматически обновляет таблицы маршрутизации устройств, использующих BGP, в случае изменения топологии сети.
### routing ospf instance
Настриваем протокол состояния соединения OSPF, который строит маршруты в динамической сетевой структуре, которая может использовать различные пути к своим подсетям. Он старается выбирать кратчайший путь к подсети.
- Выставляем идентификатор маршрутизатора OSPF.
### ip adress
Настраиваем айпишники на наши интерфейсах для соседних компьютеров.
### dhcp-client
Создаем dhcp килент на главном интерфейсе.
### route vrf
Настраиваем VRF, который позволяет создавать несколько экземпляров виртуальной маршрутизации, обмениваясь IP-префиксами между маршрутизаторами. VRF решают проблему перекрытия префиксов IP и обеспечивают необходимую конфиденциальность.
### mpls ldp 
Добавляем наши интерфейсы в протокол распределения меток.
- Включаем его;
- Указываем адрес подключенийи и объяваляем его в качестве транспортного адреса для соседей.
### mpls ldp interface
Добавляем наши интерфейсы.
### routing bgp peer
Подключаем пир для возможности взаимодействия с ним.
### routing ospf network
Создаем зону для наших роутеров, чтобы была возможность строить дерево кратчайших путей.
### system identity
Меняем имя нашего роутера.


## Настройка HKI

![](https://github.com/ko1ll/2023_2024-introduction_in_routing-k33212-kirpichenko-d-a/blob/main/photos/45.jpg)

### interface bridge
Создаем мост, которые в последствии будем использовать для связи. Хосты могут быть соединены вместе с помощью мостов MAC. 
Функция моста позволяет соединять хосты, будто бы они подключены к одной локальной сети. 
### routing bgp instance
настраиваем протокол BGP, позволяет настроить систему динамической маршрутизации. Система автоматически обновляет таблицы маршрутизации устройств, использующих BGP, в случае изменения топологии сети.
### routing ospf instance
Настриваем протокол состояния соединения OSPF, который строит маршруты в динамической сетевой структуре, которая может использовать различные пути к своим подсетям. Он старается выбирать кратчайший путь к подсети.
- Выставляем идентификатор маршрутизатора OSPF.
### ip adress
Настраиваем айпишники на наши интерфейсах для соседних компьютеров.
### dhcp-client
Создаем dhcp килент на главном интерфейсе.
### mpls ldp 
Добавляем наши интерфейсы в протокол распределения меток.
- Включаем его;
- Указываем адрес подключенийи и объяваляем его в качестве транспортного адреса для соседей.
### mpls ldp interface
Добавляем наши интерфейсы.
### routing bgp peer
Подключаем пир для возможности взаимодействия с ним.
### routing ospf network
Создаем зону для наших роутеров, чтобы была возможность строить дерево кратчайших путей.
### system identity
Меняем имя нашего роутера.

## Настройка LND

![](https://github.com/ko1ll/2023_2024-introduction_in_routing-k33212-kirpichenko-d-a/blob/main/photos/46.jpg)

### interface bridge
Создаем мост, которые в последствии будем использовать для связи. Хосты могут быть соединены вместе с помощью мостов MAC. 
Функция моста позволяет соединять хосты, будто бы они подключены к одной локальной сети. 
### routing bgp instance
настраиваем протокол BGP, позволяет настроить систему динамической маршрутизации. Система автоматически обновляет таблицы маршрутизации устройств, использующих BGP, в случае изменения топологии сети.
### routing ospf instance
Настриваем протокол состояния соединения OSPF, который строит маршруты в динамической сетевой структуре, которая может использовать различные пути к своим подсетям. Он старается выбирать кратчайший путь к подсети.
- Выставляем идентификатор маршрутизатора OSPF.
### ip adress
Настраиваем айпишники на наши интерфейсах для соседних компьютеров.
### dhcp-client
Создаем dhcp килент на главном интерфейсе.
### mpls ldp 
Добавляем наши интерфейсы в протокол распределения меток.
- Включаем его;
- Указываем адрес подключенийи и объяваляем его в качестве транспортного адреса для соседей.
### mpls ldp interface
Добавляем наши интерфейсы.
### routing bgp peer
Подключаем пир для возможности взаимодействия с ним.
### routing ospf network
Создаем зону для наших роутеров, чтобы была возможность строить дерево кратчайших путей.
### system identity
Меняем имя нашего роутера.


## Настройка LBN

![](https://github.com/ko1ll/2023_2024-introduction_in_routing-k33212-kirpichenko-d-a/blob/main/photos/47.jpg)

### interface bridge
Создаем мост, которые в последствии будем использовать для связи. Хосты могут быть соединены вместе с помощью мостов MAC. 
Функция моста позволяет соединять хосты, будто бы они подключены к одной локальной сети. 
### routing bgp instance
настраиваем протокол BGP, позволяет настроить систему динамической маршрутизации. Система автоматически обновляет таблицы маршрутизации устройств, использующих BGP, в случае изменения топологии сети.
### routing ospf instance
Настриваем протокол состояния соединения OSPF, который строит маршруты в динамической сетевой структуре, которая может использовать различные пути к своим подсетям. Он старается выбирать кратчайший путь к подсети.
- Выставляем идентификатор маршрутизатора OSPF.
### ip adress
Настраиваем айпишники на наши интерфейсах для соседних компьютеров.
### dhcp-client
Создаем dhcp килент на главном интерфейсе.
### mpls ldp 
Добавляем наши интерфейсы в протокол распределения меток.
- Включаем его;
- Указываем адрес подключенийи и объяваляем его в качестве транспортного адреса для соседей.
### mpls ldp interface
Добавляем наши интерфейсы.
### routing bgp peer
Подключаем пир для возможности взаимодействия с ним.
### routing ospf network
Создаем зону для наших роутеров, чтобы была возможность строить дерево кратчайших путей.
### system identity
Меняем имя нашего роутера.


## Настройка PC1 (вторая часть)

![](https://github.com/ko1ll/2023_2024-introduction_in_routing-k33212-kirpichenko-d-a/blob/main/photos/34.jpg)

Меняем имя роутера, ставим айпишник для интерфейса и включаем dhcp.
## Настройка PC2 (вторая часть)

![](https://github.com/ko1ll/2023_2024-introduction_in_routing-k33212-kirpichenko-d-a/blob/main/photos/35.jpg)
Меняем имя роутера, ставим айпишник для интерфейса и включаем dhcp.

## Настройка PC3 (вторая часть)

![](https://github.com/ko1ll/2023_2024-introduction_in_routing-k33212-kirpichenko-d-a/blob/main/photos/33.jpg)
Меняем имя роутера, ставим айпишник для интерфейса и включаем dhcp.

## Настройка SVL (вторая часть)
![](https://github.com/ko1ll/2023_2024-introduction_in_routing-k33212-kirpichenko-d-a/blob/main/photos/36.jpg)
### interface vpls
Подключаем VPLS, который повышает эффективность передачи данных и устраняет расходы на заголовок IP.

## Настройка NY  (вторая часть)
![](https://github.com/ko1ll/2023_2024-introduction_in_routing-k33212-kirpichenko-d-a/blob/main/photos/37.jpg)
### interface vpls
Подключаем VPLS, который повышает эффективность передачи данных и устраняет расходы на заголовок IP.

## Настройка SPB (вторая часть)
![](https://github.com/ko1ll/2023_2024-introduction_in_routing-k33212-kirpichenko-d-a/blob/main/photos/38.jpg)
### interface vpls
Подключаем VPLS, который повышает эффективность передачи данных и устраняет расходы на заголовок IP.




## Проверка сети (первая часть)
![](https://github.com/ko1ll/2023_2024-introduction_in_routing-k33212-kirpichenko-d-a/blob/main/photos/48.jpg)
Смотрим таблицу роутеров и пингуем
![](https://github.com/ko1ll/2023_2024-introduction_in_routing-k33212-kirpichenko-d-a/blob/main/photos/49.jpg)
Смотрим таблицу роутеров и пингуем
![](https://github.com/ko1ll/2023_2024-introduction_in_routing-k33212-kirpichenko-d-a/blob/main/photos/50.jpg)
Смотрим таблицу роутеров и пингуем

## Проверка сети (вторая часть)
![](https://github.com/ko1ll/2023_2024-introduction_in_routing-k33212-kirpichenko-d-a/blob/main/photos/39.jpg)
Пингум пк
![](https://github.com/ko1ll/2023_2024-introduction_in_routing-k33212-kirpichenko-d-a/blob/main/photos/40.jpg)
Пингум пк
![](https://github.com/ko1ll/2023_2024-introduction_in_routing-k33212-kirpichenko-d-a/blob/main/photos/41.jpg)
Пингум пк


